(this.webpackJsonpumagine=this.webpackJsonpumagine||[]).push([[30,31],{129:function(e,t,a){"use strict";a.r(t);var o=a(78),n=a(31),c=a(17),l=a(60),r=a(2),i=a(24),s=a(72),d=(a(33),a(63),a(64),a(66),a(67),a(68),a(350)),u=a(331),j=a(328),b=a(5);t.default=function(e){var t,a=e.sdata,v=(e.openHandle,e.closeHandle),O=e.show,g=Object(s.a)(i.a.firestore().collection("storeCategory")),h=Object(l.a)(g,3),m=h[0],f=(h[1],h[2],Object(r.useState)(Object(c.a)({},a))),p=Object(l.a)(f,2),x=p[0],_=p[1],y=Object(r.useState)(!1),C=Object(l.a)(y,2),k=C[0],S=C[1];Object(r.useEffect)((function(){_(Object(c.a)({},a))}),[a]);var L=function(e){switch(e.target.name){case"store_name":_(Object(c.a)(Object(c.a)({},x),{},{name:e.target.value}));break;case"floor_option":_(Object(c.a)(Object(c.a)({},x),{},Object(n.a)({},e.target.name,e.target.value)));break;case"store_img":_(Object(c.a)(Object(c.a)({},x),{},{image_url:e.target.files[0]})),S(!0);break;case"store_num":_(Object(c.a)(Object(c.a)({},x),{},{contact_detail:e.target.value}));break;case"store_timing":_(Object(c.a)(Object(c.a)({},x),{},{timing:e.target.value}));break;case"store_desc":_(Object(c.a)(Object(c.a)({},x),{},{description:e.target.value}));break;case"store_category":console.log("target value initial ",e);var t=Object(o.a)(null===x||void 0===x?void 0:x.category);if(e.target.checked)_(Object(c.a)(Object(c.a)({},x),{},{category:[].concat(Object(o.a)(t),[e.target.value])}));else{var a=t.indexOf(e.target.value);console.log(a),t.splice(a,1),_(Object(c.a)(Object(c.a)({},x),{},{category:Object(o.a)(t)}))}}};return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(d.a,{show:O,onHide:v,children:[Object(b.jsx)(d.a.Header,{closeButton:!0,children:Object(b.jsx)(d.a.Title,{children:"Store Update"})}),Object(b.jsx)(d.a.Body,{children:Object(b.jsxs)(u.a,{onSubmit:function(e){return function(e,t){var a;t.preventDefault(),k?i.a.storage().ref("".concat(null===e||void 0===e?void 0:e.name,"/")).child(null===e||void 0===e||null===(a=e.image_url)||void 0===a?void 0:a.name).put(null===e||void 0===e?void 0:e.image_url).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){var t;i.a.storage().ref("".concat(null===e||void 0===e?void 0:e.name,"/")).child(null===e||void 0===e||null===(t=e.image_url)||void 0===t?void 0:t.name).getDownloadURL().then((function(e){i.a.firestore().collection("store").doc(null===x||void 0===x?void 0:x.id).update(Object(c.a)(Object(c.a)({},x),{},{image_url:e}))})).then((function(e){return alert("store updated success")})).catch((function(e){console.error(e)})).finally((function(e){return _({category:[]})}))})):i.a.firestore().collection("store").doc(null===x||void 0===x?void 0:x.id).update(Object(c.a)({},x)).then((function(e){return alert("store updated success")})).catch((function(e){console.error(e)})).finally((function(e){return _({})}))}(x,e)},children:[Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Image/Logo"}),Object(b.jsx)(u.a.Control,{type:"file",onChange:L,name:"store_img"})]}),Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Name"}),Object(b.jsx)(u.a.Control,{type:"text",onChange:L,name:"store_name",value:null===x||void 0===x?void 0:x.name})]}),Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Timing"}),Object(b.jsx)(u.a.Control,{type:"text",onChange:L,name:"store_timing",placeholder:"Open 11am  -  8pm",value:null===x||void 0===x?void 0:x.timing})]}),Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Description "}),Object(b.jsx)(u.a.Control,{as:"textarea",onChange:L,name:"store_desc",value:null===x||void 0===x?void 0:x.description})]}),Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Contact Number"}),Object(b.jsx)(u.a.Control,{type:"text",onChange:L,name:"store_num",value:null===x||void 0===x?void 0:x.contact_detail})]}),Object(b.jsxs)(u.a.Group,{children:[Object(b.jsx)(u.a.Label,{children:"Store Category"}),Object(b.jsx)("br",{}),null===m||void 0===m||null===(t=m.docs)||void 0===t?void 0:t.map((function(e){var t,a;return Object(b.jsx)(u.a.Check,{inline:!0,onChange:L,checked:null===x||void 0===x||null===(t=x.category)||void 0===t?void 0:t.includes(null===e||void 0===e||null===(a=e.data())||void 0===a?void 0:a.value),label:null===e||void 0===e?void 0:e.data().label,name:"store_category",id:null===e||void 0===e?void 0:e.data().id,value:null===e||void 0===e?void 0:e.data().value})}))]}),Object(b.jsx)("div",{className:"custom-select",children:Object(b.jsxs)("select",{class:"form-select-sm","aria-label":"Default select example",onChange:L,name:"floor_option",value:null===x||void 0===x?void 0:x.floor_option,children:[Object(b.jsx)("option",{value:"ground_floor",children:"Ground Floor"}),Object(b.jsx)("option",{value:"first_floor",children:"First Floor"}),Object(b.jsx)("option",{value:"second_floor",children:"Second Floor"}),Object(b.jsx)("option",{value:"third_floor",children:"Third Floor"})]})}),Object(b.jsx)("br",{}),Object(b.jsx)(j.a,{variant:"primary",type:"submit",onClick:v,children:"Upload"})]})})]})})}}}]);