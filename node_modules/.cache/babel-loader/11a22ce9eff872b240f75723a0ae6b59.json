{"ast":null,"code":"import _objectSpread from\"/Users/aranichaudhuri/GitHub/the-mall2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/aranichaudhuri/GitHub/the-mall2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{memo,useState,useEffect}from\"react\";import firebase from\"firebase\";import{useCollection,useDocument}from\"react-firebase-hooks/firestore\";import{connect}from\"react-redux\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Dispbrands(props){var _storeSnapshot$docs,_categorySnapshot$doc;//display category\nvar _useCollection=useCollection(firebase.firestore().collection('storeCategory')),_useCollection2=_slicedToArray(_useCollection,3),categorySnapshot=_useCollection2[0],categoryloading=_useCollection2[1],categoryerror=_useCollection2[2];var searchItem=props.searchItem;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchCategory=_useState2[0],setsearchCategory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dispData=_useState4[0],setdispData=_useState4[1];var _useCollection3=useCollection(firebase.firestore().collection('store')),_useCollection4=_slicedToArray(_useCollection3,3),storeSnapshot=_useCollection4[0],loadingStore=_useCollection4[1],errorStore=_useCollection4[2];var temp=[];storeSnapshot===null||storeSnapshot===void 0?void 0:(_storeSnapshot$docs=storeSnapshot.docs)===null||_storeSnapshot$docs===void 0?void 0:_storeSnapshot$docs.forEach(function(doc){temp.push(_objectSpread(_objectSpread({},doc===null||doc===void 0?void 0:doc.data()),{},{id:doc===null||doc===void 0?void 0:doc.id}));});var matches=[];if(searchItem.length>0){matches=[];// const clearState = () => {\n//   setsearchCategory(\"\");\n// };\nmatches=temp.filter(function(item){var regex=new RegExp(\"\".concat(searchItem),\"gi\");return item.name.match(regex);});}else if(searchCategory.length>0){matches=[];matches=temp.filter(function(item){var _item$category;return item===null||item===void 0?void 0:(_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.includes(searchCategory);});}useEffect(function(){if(searchItem.length>0){setdispData(matches);matches=[];setsearchCategory(\"\");}else if(searchCategory.length>0){setdispData(matches);matches=[];}else{setdispData(temp);}},[storeSnapshot,searchItem,searchCategory]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row searchsuggest mt-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-10 offset-md-1 text-center \",children:categorySnapshot===null||categorySnapshot===void 0?void 0:(_categorySnapshot$doc=categorySnapshot.docs)===null||_categorySnapshot$doc===void 0?void 0:_categorySnapshot$doc.map(function(single,e){var _single$data2;return/*#__PURE__*/_jsx(\"div\",{className:\"btn btn-light m-1 \",style:{backgroundColor:\"#ffffff\"},onClick:function onClick(){var _single$data;return setsearchCategory(single===null||single===void 0?void 0:(_single$data=single.data())===null||_single$data===void 0?void 0:_single$data.value);},children:/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:single===null||single===void 0?void 0:(_single$data2=single.data())===null||_single$data2===void 0?void 0:_single$data2.label})});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row my-4\",children:[loadingStore&&/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"sr-only\",children:\"Loading...\"})})}),dispData.map(function(store){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{textDecoration:\"none\",color:\"inherit\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card  text-center mb-5 \",children:[/*#__PURE__*/_jsx(\"div\",{style:{height:\"250px\"},children:/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top p-5\",src:store===null||store===void 0?void 0:store.image_url,style:{paddingTop:\"auto\"}})}),/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",style:{fontWeight:\"600\"},children:store===null||store===void 0?void 0:store.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-text\",children:store.timing}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"rgba(0,0,0,0.5)\"},children:store===null||store===void 0?void 0:store.contact_detail})]})]})})});})]})]});}export default connect(function(state){return{searchItem:state.searchItem};})(/*#__PURE__*/memo(Dispbrands));","map":null,"metadata":{},"sourceType":"module"}