{"ast":null,"code":"import _slicedToArray from\"/Users/aranichaudhuri/GitHub/the-mall2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Modal,Form,Button}from\"react-bootstrap\";import firebase from\"firebase\";import{useCollection,useDocument}from\"react-firebase-hooks/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddCat=function AddCat(props){var _categorySnapshot$doc;var setCat=props.setCat,showCat=props.showCat;var _useCollection=useCollection(firebase.firestore().collection('storeCategory')),_useCollection2=_slicedToArray(_useCollection,3),categorySnapshot=_useCollection2[0],categoryloading=_useCollection2[1],categoryerror=_useCollection2[2];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newCategory=_useState2[0],setnewCategory=_useState2[1];// add category to state;\nvar addToState=function addToState(e){setnewCategory(e.target.value);};//Add category to db function\nvar addCategory=function addCategory(category,e){e.preventDefault();firebase.firestore().collection('storeCategory').add({label:category,id:category,value:category.toLowerCase()}).then(function(h){return alert(\"category added success\");}).catch(function(e){return console.log(e);}).finally(function(){return setnewCategory(\"\");});};//remove category from db function\nvar delCategory=function delCategory(takeID){firebase.firestore().collection('storeCategory').doc(takeID).delete().then(function(h){return alert(\"category deleted success\");}).catch(function(e){return console.log(e);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Modal,{show:showCat,onHide:function onHide(){return setCat(false);},children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Store Update\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return addCategory(newCategory,e);},children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Add category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"store_category\",onChange:addToState})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Upload\"})]}),categoryloading&&/*#__PURE__*/_jsx(\"div\",{class:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"sr-only\",children:\"Loading...\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column\",children:categorySnapshot===null||categorySnapshot===void 0?void 0:(_categorySnapshot$doc=categorySnapshot.docs)===null||_categorySnapshot$doc===void 0?void 0:_categorySnapshot$doc.map(function(single,e){var _single$data;return/*#__PURE__*/_jsxs(\"div\",{className:\" my-1 d-flex justify-content-between\",children:[single===null||single===void 0?void 0:(_single$data=single.data())===null||_single$data===void 0?void 0:_single$data.label,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return delCategory(single===null||single===void 0?void 0:single.id);},variant:\"danger\",size:\"sm\",children:\"DELETE\"})]});})})]})]})});};export default AddCat;","map":null,"metadata":{},"sourceType":"module"}