{"code":"(this.webpackJsonpumagine=this.webpackJsonpumagine||[]).push([[29],{330:function(e,t,a){\"use strict\";a.r(t);var n=a(77),o=a(31),i=a(17),c=a(60),r=a(2),l=a(24),s=a(71),d=(a(33),a(63),a(64),a(65),a(66),a(67),a(328)),u=a(331),j=a(130),b=a(131),m=a(5),v=Object(r.lazy)((function(){return Promise.all([a.e(2),a.e(31)]).then(a.bind(null,128))})),O=Object(r.lazy)((function(){return Promise.all([a.e(2),a.e(27)]).then(a.bind(null,129))}));t.default=function(){var e,t=Object(s.a)(l.a.firestore().collection(\"storeCategory\")),a=Object(c.a)(t,3),g=a[0],h=(a[1],a[2],Object(s.a)(l.a.firestore().collection(\"store\"))),x=Object(c.a)(h,3),f=x[0],_=x[1],p=(x[2],Object(r.useState)({category:[]})),y=Object(c.a)(p,2),C=y[0],k=y[1],N=Object(r.useState)({}),S=Object(c.a)(N,2),F=S[0],w=S[1],L=Object(r.useState)(!1),D=Object(c.a)(L,2),B=D[0],G=D[1],q=Object(r.useState)(!1),T=Object(c.a)(q,2),U=T[0],E=T[1],I=function(e){switch(e.target.name){case\"store_name\":k(Object(i.a)(Object(i.a)({},C),{},{name:e.target.value}));break;case\"floor_option\":k(Object(i.a)(Object(i.a)({},C),{},Object(o.a)({},e.target.name,e.target.value)));break;case\"store_img\":k(Object(i.a)(Object(i.a)({},C),{},{image_url:e.target.files[0]}));break;case\"store_num\":k(Object(i.a)(Object(i.a)({},C),{},{contact_detail:e.target.value}));break;case\"store_timing\":k(Object(i.a)(Object(i.a)({},C),{},{timing:e.target.value}));break;case\"store_desc\":k(Object(i.a)(Object(i.a)({},C),{},{description:e.target.value}));break;case\"store_category\":var t=Object(n.a)(null===C||void 0===C?void 0:C.category);if(e.target.checked)k(Object(i.a)(Object(i.a)({},C),{},{category:[].concat(Object(n.a)(t),[e.target.value])}));else{var a=t.indexOf(e.target.value);console.log(a),t.splice(a,1),k(Object(i.a)(Object(i.a)({},C),{},{category:Object(n.a)(t)}))}}},P=b.c().shape({store_img:b.b().required(\"Image is required\"),store_name:b.d().required(\"Name is required\"),store_timing:b.d().required(\"Timing is required\"),store_desc:b.d(),store_num:b.d(),store_category:b.a().required(\"Please select a category\"),floor_option:b.d()});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(\"div\",{className:\"container-fluid py-5\",style:{fontFamily:\"Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif\",backgroundSize:\"cover\",backgroundPosition:\"top center\"},children:Object(m.jsxs)(\"div\",{className:\"container\",children:[Object(m.jsx)(d.a,{variant:\"info\",className:\"text-white fw-bold\",onClick:function(){return E(!0)},children:\"ADD CATEGORY\"}),Object(m.jsx)(O,{setCat:E,showCat:U}),Object(m.jsxs)(\"div\",{className:\"row \",children:[Object(m.jsx)(\"h1\",{children:\"Store Upload Form\"}),Object(m.jsx)(j.a,{initialValues:{store_img:\"\",store_name:\"\",store_timing:\"\",store_desc:\"\",store_num:\"\",store_category:\"\",floor_option:\"\"},validationSchema:P,onSubmit:function(e,t){var a=t.resetForm,n=t.setSubmitting;n(!0),a(),n(!1)},children:function(e){var t,a=e.values,n=e.errors,o=e.touched,c=e.isValid,r=e.dirty,s=e.handleChange,j=e.handleBlur;e.isSubmitting;return Object(m.jsxs)(u.a,{onSubmit:function(e){return function(e,t){var a;t.preventDefault(),l.a.storage().ref(\"\".concat(null===e||void 0===e?void 0:e.name,\"/\")).child(null===e||void 0===e||null===(a=e.image_url)||void 0===a?void 0:a.name).put(null===e||void 0===e?void 0:e.image_url).on(\"state_changed\",(function(e){}),(function(e){console.log(e)}),(function(){var t;l.a.storage().ref(\"\".concat(null===e||void 0===e?void 0:e.name,\"/\")).child(null===e||void 0===e||null===(t=e.image_url)||void 0===t?void 0:t.name).getDownloadURL().then((function(e){l.a.firestore().collection(\"store\").add(Object(i.a)(Object(i.a)({},C),{},{image_url:e}))})).then((function(e){return alert(\"store added success\")})).catch((function(e){console.error(e)})).finally((function(e){return k({category:[]})}))}))}(C,e)},children:[Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Image/Logo\"}),Object(m.jsx)(u.a.Control,{type:\"file\",onBlur:j,onChange:function(e){I(e),s(e)},name:\"store_img\",value:a.store_img,className:n.store_img&&o.store_img?\"is-invalid\":null}),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_img})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Name\"}),Object(m.jsx)(u.a.Control,{type:\"text\",onBlur:j,onChange:function(e){I(e),s(e)},name:\"store_name\",value:a.store_name,className:n.store_name&&o.store_name?\"is-invalid\":null}),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_name})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Timing\"}),Object(m.jsx)(u.a.Control,{type:\"text\",onBlur:j,onChange:function(e){I(e),s(e)},name:\"store_timing\",placeholder:\"Open 11am  -  8pm\",value:a.store_timing,className:n.store_timing&&o.store_timing?\"is-invalid\":null}),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_timing})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Description \"}),Object(m.jsx)(u.a.Control,{as:\"textarea\",onBlur:j,onChange:function(e){I(e),s(e)},name:\"store_desc\",value:a.store_desc,className:n.store_desc&&o.store_desc?\"is-invalid\":null}),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_desc})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Contact Number\"}),Object(m.jsx)(u.a.Control,{type:\"text\",onBlur:j,onChange:function(e){I(e),s(e)},name:\"store_num\",value:a.store_num,className:n.store_num&&o.store_num?\"is-invalid\":null}),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_num})]}),Object(m.jsxs)(u.a.Group,{children:[Object(m.jsx)(u.a.Label,{children:\"Store Category\"}),Object(m.jsx)(\"br\",{}),null===g||void 0===g||null===(t=g.docs)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)(u.a.Check,{inline:!0,onBlur:j,onChange:function(e){I(e),s(e)},label:null===e||void 0===e?void 0:e.data().label,name:\"store_category\",id:null===e||void 0===e?void 0:e.data().id,value:null===e||void 0===e?void 0:e.data().value,className:n.store_category&&o.store_category?\"is-invalid\":null})})),Object(m.jsx)(u.a.Control.Feedback,{type:\"invalid\",children:n.store_category})]}),Object(m.jsxs)(\"select\",{class:\"form-select-sm my-3\",\"aria-label\":\"Default select example\",onChange:function(e){I(e),s(e)},name:\"floor_option\",children:[Object(m.jsx)(\"option\",{value:\"ground_floor\",selected:!0,children:\"Ground Floor\"}),Object(m.jsx)(\"option\",{value:\"first_floor\",selected:!0,children:\"First Floor\"}),Object(m.jsx)(\"option\",{value:\"second_floor\",children:\"Second Floor\"}),Object(m.jsx)(\"option\",{value:\"third_floor\",children:\"Third Floor\"})]}),Object(m.jsx)(\"br\",{}),Object(m.jsx)(d.a,{variant:\"primary\",type:\"submit\",className:r&&c?\"\":\"disabled-btn\",disabled:!(r&&c),children:\"Upload\"})]})}})]}),Object(m.jsxs)(\"div\",{className:\"row my-4\",children:[_&&Object(m.jsx)(\"div\",{class:\"d-flex justify-content-center\",children:Object(m.jsx)(\"div\",{class:\"spinner-border\",role:\"status\",children:Object(m.jsx)(\"span\",{class:\"sr-only\"})})}),null===f||void 0===f||null===(e=f.docs)||void 0===e?void 0:e.map((function(e){var t,a,n,o;return Object(m.jsx)(\"div\",{className:\"col-md-3\",children:Object(m.jsxs)(\"div\",{className:\"card  text-center mb-5 \",children:[Object(m.jsx)(\"div\",{children:Object(m.jsx)(\"img\",{className:\"card-img-top p-5\",src:null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.image_url})}),Object(m.jsx)(\"h4\",{className:\"card-title\",style:{fontWeight:\"600\"},children:null===e||void 0===e||null===(a=e.data())||void 0===a?void 0:a.name}),Object(m.jsxs)(\"div\",{className:\"card-body\",children:[Object(m.jsx)(\"div\",{className:\"card-text\",children:null===e||void 0===e||null===(n=e.data())||void 0===n?void 0:n.timing}),Object(m.jsx)(\"span\",{style:{color:\"rgba(0,0,0,0.5)\"},children:null===e||void 0===e||null===(o=e.data())||void 0===o?void 0:o.contact_detail})]}),Object(m.jsxs)(\"div\",{className:\"card-footer text-muted d-flex justify-content-between\",children:[Object(m.jsx)(d.a,{variant:\"success\",onClick:function(){w(Object(i.a)(Object(i.a)({},null===e||void 0===e?void 0:e.data()),{},{id:null===e||void 0===e?void 0:e.id})),G(!0)},children:\"EDIT\"}),Object(m.jsx)(d.a,{variant:\"danger\",onClick:function(t){var a,n,o;return window.confirm(\"Are you sure you wish to delete this item?\")&&(n=null===e||void 0===e?void 0:e.id,o=null===e||void 0===e||null===(a=e.data())||void 0===a?void 0:a.image_url,l.a.storage().refFromURL(o).delete().then((function(){console.log(\"Deleted\")})).catch((function(e){return console.log(e)})),void l.a.firestore().collection(\"store\").doc(n).delete())},children:\"DELETE\"})]})]})})}))]})]})}),Object(m.jsx)(r.Suspense,{fallback:Object(m.jsx)(\"div\",{children:\"Loading.... \"}),children:Object(m.jsx)(v,{sdata:F,openHandle:function(){G(!0)},closeHandle:function(){G(!1)},show:B})})]})}}}]);","name":"static/js/29.208ae47e.chunk.js","input":"(this[\"webpackJsonpumagine\"] = this[\"webpackJsonpumagine\"] || []).push([[29],{\n\n/***/ 330:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77);\n/* harmony import */ var _Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31);\n/* harmony import */ var _Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17);\n/* harmony import */ var _Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24);\n/* harmony import */ var react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33);\n/* harmony import */ var _includes_TopRibbon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63);\n/* harmony import */ var _includes_Navbar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(64);\n/* harmony import */ var _includes_SubscribeSection__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(65);\n/* harmony import */ var _includes_Footer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(66);\n/* harmony import */ var _includes_Feedback__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(67);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(328);\n/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(331);\n/* harmony import */ var formik__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(130);\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(131);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(5);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__);\nvar StoreUpdate=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_4__[\"lazy\"])(function(){return Promise.all(/* import() */[__webpack_require__.e(2), __webpack_require__.e(31)]).then(__webpack_require__.bind(null, 128));});var AddCat=/*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_4__[\"lazy\"])(function(){return Promise.all(/* import() */[__webpack_require__.e(2), __webpack_require__.e(27)]).then(__webpack_require__.bind(null, 129));});var StoreManage=function StoreManage(){var _storeSnapshot$docs;//load category\nvar _useCollection=Object(react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_6__[/* useCollection */ \"a\"])(firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].firestore().collection('storeCategory')),_useCollection2=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useCollection,3),categorySnapshot=_useCollection2[0],categoryloading=_useCollection2[1],categoryerror=_useCollection2[2];//load stores\nvar _useCollection3=Object(react_firebase_hooks_firestore__WEBPACK_IMPORTED_MODULE_6__[/* useCollection */ \"a\"])(firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].firestore().collection(\"store\")),_useCollection4=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useCollection3,3),storeSnapshot=_useCollection4[0],storeLoading=_useCollection4[1],error=_useCollection4[2];//save store data from form\nvar _useState=Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])({category:[]}),_useState2=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useState,2),storeData=_useState2[0],setStoreData=_useState2[1];//functions for store update modal\nvar _useState3=Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])({}),_useState4=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useState3,2),updateStore=_useState4[0],setupdateStore=_useState4[1];var _useState5=Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(false),_useState6=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useState5,2),show=_useState6[0],setShow=_useState6[1];var openHandle=function openHandle(){setShow(true);};var closeHandle=function closeHandle(){setShow(false);};//functions for store category add Modal\nvar _useState7=Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(false),_useState8=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_useState7,2),showupdateCat=_useState8[0],setShowupdateCat=_useState8[1];var deleteItem=function deleteItem(storeId,url){var imageRef=firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].storage().refFromURL(url);imageRef.delete().then(function(){console.log(\"Deleted\");}).catch(function(err){return console.log(err);});firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].firestore().collection('store').doc(storeId).delete();};var SaveFormDatatoState=function SaveFormDatatoState(e){switch(e.target.name){case\"store_name\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{name:e.target.value}));break;case\"floor_option\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])({},e.target.name,e.target.value)));break;case\"store_img\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{image_url:e.target.files[0]}));break;case\"store_num\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{contact_detail:e.target.value}));break;case\"store_timing\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{timing:e.target.value}));break;case\"store_desc\":setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{description:e.target.value}));break;case\"store_category\":var newArr=Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(storeData===null||storeData===void 0?void 0:storeData.category);if(e.target.checked){setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{category:[].concat(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(newArr),[e.target.value])}));}else{var index=newArr.indexOf(e.target.value);console.log(index);newArr.splice(index,1);setStoreData(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{category:Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(newArr)}));}break;default:break;}};var SaveStatetoDB=function SaveStatetoDB(data,e){var _data$image_url;e.preventDefault();var uploadTask=firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].storage().ref(\"\".concat(data===null||data===void 0?void 0:data.name,\"/\")).child(data===null||data===void 0?void 0:(_data$image_url=data.image_url)===null||_data$image_url===void 0?void 0:_data$image_url.name).put(data===null||data===void 0?void 0:data.image_url);uploadTask.on('state_changed',function(snapShot){//takes a snap shot of the process as it is happening\n},function(err){//catches the errors\nconsole.log(err);},function(){var _data$image_url2;// gets the functions from storage refences the image storage in firebase by the children\n// gets the download url then sets the image from firebase as the value for the imgUrl key:\nfirebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].storage().ref(\"\".concat(data===null||data===void 0?void 0:data.name,\"/\")).child(data===null||data===void 0?void 0:(_data$image_url2=data.image_url)===null||_data$image_url2===void 0?void 0:_data$image_url2.name).getDownloadURL().then(function(fireBaseUrl){firebase__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].firestore().collection(\"store\").add(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},storeData),{},{image_url:fireBaseUrl}));}).then(function(bruh){return alert(\"store added success\");}).catch(function(error){console.error(error);}).finally(function(result){return setStoreData({category:[]});});});};var validationSchema=yup__WEBPACK_IMPORTED_MODULE_16__[/* object */ \"c\"]().shape({store_img:yup__WEBPACK_IMPORTED_MODULE_16__[/* mixed */ \"b\"]().required(\"Image is required\"),store_name:yup__WEBPACK_IMPORTED_MODULE_16__[/* string */ \"d\"]().required(\"Name is required\"),store_timing:yup__WEBPACK_IMPORTED_MODULE_16__[/* string */ \"d\"]().required(\"Timing is required\"),store_desc:yup__WEBPACK_IMPORTED_MODULE_16__[/* string */ \"d\"](),store_num:yup__WEBPACK_IMPORTED_MODULE_16__[/* string */ \"d\"](),store_category:yup__WEBPACK_IMPORTED_MODULE_16__[/* array */ \"a\"]().required(\"Please select a category\"),floor_option:yup__WEBPACK_IMPORTED_MODULE_16__[/* string */ \"d\"]()});return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"Fragment\"],{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{className:\"container-fluid py-5\",style:{fontFamily:\"Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif\",backgroundSize:\"cover\",backgroundPosition:\"top center\"},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"],{variant:\"info\",className:\"text-white fw-bold\",onClick:function onClick(){return setShowupdateCat(true);},children:\"ADD CATEGORY\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(AddCat,{setCat:setShowupdateCat,showCat:showupdateCat}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"row \",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"h1\",{children:\"Store Upload Form\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(formik__WEBPACK_IMPORTED_MODULE_15__[/* Formik */ \"a\"],{initialValues:{store_img:\"\",store_name:\"\",store_timing:\"\",store_desc:'',store_num:\"\",store_category:'',floor_option:\"\"},validationSchema:validationSchema,onSubmit:function onSubmit(values,_ref){var resetForm=_ref.resetForm,setSubmitting=_ref.setSubmitting;setSubmitting(true);resetForm();setSubmitting(false);},children:function children(_ref2){var _categorySnapshot$doc;var values=_ref2.values,errors=_ref2.errors,touched=_ref2.touched,isValid=_ref2.isValid,dirty=_ref2.dirty,handleChange=_ref2.handleChange,handleBlur=_ref2.handleBlur,isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"],{onSubmit:function onSubmit(e){return SaveStatetoDB(storeData,e);},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Image/Logo\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control,{type:\"file\",onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"store_img\",value:values.store_img,className:errors.store_img&&touched.store_img?\"is-invalid\":null}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_img})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Name\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control,{type:\"text\",onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"store_name\",value:values.store_name,className:errors.store_name&&touched.store_name?\"is-invalid\":null}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_name})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Timing\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control,{type:\"text\",onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"store_timing\",placeholder:\"Open 11am  -  8pm\",value:values.store_timing,className:errors.store_timing&&touched.store_timing?\"is-invalid\":null}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_timing})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Description \"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control,{as:\"textarea\",onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"store_desc\",value:values.store_desc,className:errors.store_desc&&touched.store_desc?\"is-invalid\":null}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_desc})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Contact Number\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control,{type:\"text\",onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"store_num\",value:values.store_num,className:errors.store_num&&touched.store_num?\"is-invalid\":null}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_num})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Group,{children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Label,{children:\"Store Category\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"br\",{}),categorySnapshot===null||categorySnapshot===void 0?void 0:(_categorySnapshot$doc=categorySnapshot.docs)===null||_categorySnapshot$doc===void 0?void 0:_categorySnapshot$doc.map(function(item){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Check,{inline:true,onBlur:handleBlur,onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},label:item===null||item===void 0?void 0:item.data().label,name:\"store_category\",id:item===null||item===void 0?void 0:item.data().id,value:item===null||item===void 0?void 0:item.data().value,className:errors.store_category&&touched.store_category?\"is-invalid\":null});}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"a\"].Control.Feedback,{type:\"invalid\",children:errors.store_category})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"select\",{class:\"form-select-sm my-3\",\"aria-label\":\"Default select example\",onChange:function onChange(e){SaveFormDatatoState(e);handleChange(e);},name:\"floor_option\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"option\",{value:\"ground_floor\",selected:true,children:\"Ground Floor\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"option\",{value:\"first_floor\",selected:true,children:\"First Floor\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"option\",{value:\"second_floor\",children:\"Second Floor\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"option\",{value:\"third_floor\",children:\"Third Floor\"})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"],{variant:\"primary\",type:\"submit\",className:dirty&&isValid?\"\":'disabled-btn',disabled:!(dirty&&isValid),children:\"Upload\"})]});}})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"row my-4\",children:[storeLoading&&/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{class:\"d-flex justify-content-center\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{class:\"spinner-border\",role:\"status\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"span\",{class:\"sr-only\"})})}),storeSnapshot===null||storeSnapshot===void 0?void 0:(_storeSnapshot$docs=storeSnapshot.docs)===null||_storeSnapshot$docs===void 0?void 0:_storeSnapshot$docs.map(function(store){var _store$data,_store$data2,_store$data3,_store$data4;return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"card  text-center mb-5 \",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"img\",{className:\"card-img-top p-5\",src:store===null||store===void 0?void 0:(_store$data=store.data())===null||_store$data===void 0?void 0:_store$data.image_url})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"h4\",{className:\"card-title\",style:{fontWeight:\"600\"},children:store===null||store===void 0?void 0:(_store$data2=store.data())===null||_store$data2===void 0?void 0:_store$data2.name}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"card-body\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{className:\"card-text\",children:store===null||store===void 0?void 0:(_store$data3=store.data())===null||_store$data3===void 0?void 0:_store$data3.timing}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"span\",{style:{color:\"rgba(0,0,0,0.5)\"},children:store===null||store===void 0?void 0:(_store$data4=store.data())===null||_store$data4===void 0?void 0:_store$data4.contact_detail})]}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsxs\"])(\"div\",{className:\"card-footer text-muted d-flex justify-content-between\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"],{variant:\"success\",onClick:function onClick(){setupdateStore(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Object(_Users_aranichaudhuri_GitHub_the_mall2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])({},store===null||store===void 0?void 0:store.data()),{},{id:store===null||store===void 0?void 0:store.id}));setShow(true);},children:\"EDIT\"}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react_bootstrap__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"],{variant:\"danger\",onClick:function onClick(e){var _store$data5;return window.confirm(\"Are you sure you wish to delete this item?\")&&deleteItem(store===null||store===void 0?void 0:store.id,store===null||store===void 0?void 0:(_store$data5=store.data())===null||_store$data5===void 0?void 0:_store$data5.image_url);},children:\"DELETE\"})]})]})});})]})]})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(react__WEBPACK_IMPORTED_MODULE_4__[\"Suspense\"],{fallback:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(\"div\",{children:\"Loading.... \"}),children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_17__[\"jsx\"])(StoreUpdate,{sdata:updateStore,openHandle:openHandle,closeHandle:closeHandle,show:show})})]});};/* harmony default export */ __webpack_exports__[\"default\"] = (StoreManage);\n\n/***/ })\n\n}]);","inputSourceMap":null}